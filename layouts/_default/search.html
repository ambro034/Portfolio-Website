{{- define "main" }}

<header class="page-header">
<h1>{{ .Title }} &nbsp;</h1>
</header>

<div id="searchbox">
    <input id="searchInput" autofocus placeholder="{{ .Params.placeholder | default (printf "Search papers, courses, books, data") }}"
        aria-label="search" type="search" autocomplete="off" maxlength="64">
    <ul id="searchResults" aria-label="search results"></ul>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const input = document.getElementById('searchInput');
  if (!input) return;

  const phrases = [
    'Search papers, courses, books, data',
    "Try 'collaborative governance'",
    "Try 'policy design'",
    "Try 'environmental policy'"
  ];
  let i = 0, j = 0, deleting = false, t;

  function type() {
    const text = phrases[i];
    if (!deleting) {
      input.setAttribute('placeholder', text.slice(0, ++j));
      if (j === text.length) { deleting = true; t = setTimeout(type, 1200); return; }
    } else {
      input.setAttribute('placeholder', text.slice(0, --j));
      if (j === 0) { deleting = false; i = (i + 1) % phrases.length; }
    }
    t = setTimeout(type, deleting ? 35 : 55);
  }

  // stop anim when user starts typing/focuses
  input.addEventListener('focus', () => { input.placeholder = ''; clearTimeout(t); });
  input.addEventListener('input', () => { input.placeholder = ''; clearTimeout(t); });
  type();
});
</script>

{{- end }}{{/* end main */}}
